# README

## Μέλη της ομάδας

- Κυριάκος Λάμπρος Κιουράνας - 1115201900238  
- Θεόδωρος Γραμματικόπουλος - 1115202200292  
- Ιωάννης Χουστουλάκης - 1115202300296  

## Δομές Δεδομένων (Structs)

### BPLUS_DATA_NODE

Αντιπροσωπεύει έναν κόμβο φύλλο στο B+ δένδρο:

- is_innernode: Δείκτης κατάστασης αν ο κόμβος είναι εσωτερικός (1) ή φύλλο (0).  
- no_of_records: Αριθμός εγγραφών (Record) που αποθηκεύονται στον κόμβο.  
- nextdatanode: Δείκτης στο επόμενο φύλλο κόμβο, βοηθώντας στην σειριακή περιήγηση όλων των εγγραφών.  
- parent: Δείκτης στον γονικό κόμβο.  
- allrecords[MAX_RECORDS_PER_BLOCK]: Πίνακας εγγραφών (Record) που αποθηκεύονται στον κόμβο.

### BPLUS_INDEX_NODE

Αντιπροσωπεύει έναν εσωτερικό κόμβο στο B+ δένδρο:

- is_innernode: Δείκτης κατάστασης αν ο κόμβος είναι εσωτερικός (1) ή φύλλο (0).  
- no_of_keys: Αριθμός κλειδιών (id) που αποθηκεύονται στον κόμβο.  
- previousblock: Δείκτης σε ένα block-παιδί, το οποίο περιέχει τιμές (keys) μικρότερες από το πρώτο κλειδί που είναι αποθηκευμένο στο `bplusstructure`. Ουσιαστικά, είναι ο αριστερός δείκτης που οδηγεί στο υποδένδρο με τα μικρότερα κλειδιά.  
- parent: Δείκτης στον γονικό κόμβο.  
- bplusstructure[MAX_POINTERS_PER_BLOCK]: Πίνακας από δομές `(id, blockno)`. Για κάθε εγγραφή `id` υπάρχει δείκτης `blockno` προς τον κόμβο που περιέχει τιμές μεγαλύτερες ή ίσες από το `id`. Έτσι ο κόμβος χωρίζεται σε περιοχές κλειδιών.

## Λειτουργίες του B+ δένδρου

   Εισαγωγή (Insert):  
   Προσθήκη νέας εγγραφής με βάση το κλειδί της. Αν ο κόμβος φύλλου γεμίσει, γίνεται διαχωρισμός (split) ώστε το δένδρο να παραμένει ισορροπημένο.

   Αναζήτηση (Search):  
   Εύρεση εγγραφής με βάση το `id`. Το δένδρο πλοηγείται από τη ρίζα προς τα φύλλα, ακολουθώντας τα κατάλληλα κλειδιά.

   Περιήγηση (Traversal):  
   Παρέχεται δυνατότητα σειριακής ανάγνωσης όλων των εγγραφών μέσω των δεικτών μεταξύ κόμβων φύλλων. Έτσι, μπορεί να γίνει εκτύπωση όλων των εγγραφών σε αύξουσα σειρά.

   Διαχείριση Ρίζας (Root Management):  
   Σε περίπτωση διαχωρισμού του ριζικού κόμβου, δημιουργείται νέα ρίζα ώστε το δένδρο να παραμένει ισορροπημένο.

   Ενημέρωση Γονικών Κόμβων (Parent Update):  
   Μετά από διαχωρισμούς (split) κόμβων, οι σχέσεις γονέων-παιδιών ενημερώνονται ώστε να αντικατοπτρίζουν τη νέα δομή του δένδρου.

## Σχετική Οργάνωση Αρχείων

- bp_main.c: Παραδείγματα εκτέλεσης, δοκιμές βασικών λειτουργιών (insert, search, print).  
- bp_file.c: Λειτουργίες δημιουργίας, ανοίγματος, κλεισίματος του αρχείου B+ δένδρου, και χειρισμός ρίζας.  
- bp_datanode.c: Λειτουργίες που αφορούν κόμβους φύλλων (data nodes).  
- bp_indexnode.c: Λειτουργίες που αφορούν εσωτερικούς κόμβους (index nodes).  
- record.c: Λειτουργίες για τη δημιουργία, εμφάνιση και διαχείριση των εγγραφών (Record).

Κάθε αρχείο περιέχει σχόλια και τεκμηρίωση των συναρτήσεων που υλοποιούνται σε αυτό.

## Οδηγίες Μεταγλώττισης και Εκτέλεσης

  Καθαρισμός:
   ```bash
   make clean
   ```

   Μεταγλώττιση με χρήση `make`:
   ```bash
   make build
   ```

   Εκτέλεση:
   ```bash
   make run
   ``` 

## Παραδείγματα και Δοκιμές

Το αρχείο `examples.txt` περιέχει ένα παράδειγμα εκτέλεσης:  

- Εισαγωγή 79 εγγραφών.  
- Έλεγχος περιήγησης του δένδρου (B+ Tree traversal) και εκτύπωσης όλων των εγγραφών.  
- Αναζήτηση κάθε εγγραφής για επιβεβαίωση ορθής εισαγωγής.

## Σημειώσεις Υλοποίησης

   Αρχείο Header: Το πρώτο block κάθε αρχείου χρησιμοποιείται εξ ολοκλήρου για μεταδεδομένα. Αυτό απλοποιεί τη διαχείριση και εναρμονίζεται με τις απαιτήσεις της εκφώνησης.  
   Μεταδεδομένα: Στο header του αρχείου αποθηκεύονται:  

   - Το βάθος του δένδρου.  
   - Ο αριθμός εγγραφών στο αρχείο.  
   - Ο αριθμός εγγραφών στο τελευταίο block.  
   - Ο μέγιστος αριθμός εγγραφών ανά block.  
   Διαχείριση Blocks: Κάθε block διαθέτει `block_info`, το οποίο περιέχει τον αριθμό εγγραφών στο block.  

## Ελλειψεις κώδικα

Δεν υλοποιούμε την αναδρομική συνάρτηση για να κάνει το split όποτε χρειάζεται.
